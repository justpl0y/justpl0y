<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Directory</title>
<style>
  body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
  h1 { margin-bottom: 10px; }
  ul { list-style: none; padding: 0; }
  li { margin: 8px 0; }
  a { text-decoration: none; color: #0077cc; font-weight: bold; }
  a:hover { text-decoration: underline; }
  .count { color: #555; margin-left: 8px; font-size: 0.9em; }
  .total { font-size: 1em; color: #333; margin-bottom: 15px; }
</style>
</head>
<body>
<h1>JustPl0y/g Directory</h1>
<div class="total" id="totalFolders"></div>
<ul id="dirList"></ul>

<script>
const owner = "justpl0y";
const repo = "justpl0y";
const folder = "g";

async function fetchDirs() {
  try {
    const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${folder}`);
    if (!res.ok) throw new Error("Failed to fetch folder contents");
    const items = await res.json();
    const list = document.getElementById('dirList');
    const dirs = items.filter(item => item.type === "dir");
    document.getElementById('totalFolders').textContent = `Total games: ${dirs.length}`;
    dirs.forEach(dir => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = `https://${owner}.github.io/${repo}/g/${dir.name}/`;
      a.textContent = dir.name;
      li.appendChild(a);
      list.appendChild(li);
    });
  } catch (err) {
    console.error(err);
    document.getElementById('dirList').textContent = "Failed to load folders.";
  }
}

fetchDirs();
</script>
</body>
</html>
