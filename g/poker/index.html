<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Texas Hold'em Poker</title>
<style>
:root {
  --felt: #0a3d24;
  --wood: #3e2b1a;
  --accent: #f2b632;
  --text: #fff6e1;
}
* { box-sizing: border-box; }
body {
  margin:0;
  background: 
    radial-gradient(ellipse at top, rgba(13,68,40,0.3), transparent 50%),
    radial-gradient(ellipse at bottom, rgba(8,27,18,0.8), transparent 50%),
    linear-gradient(135deg, #050f0a 0%, #0a1a10 50%, #081b12 100%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  color: var(--text);
  padding: 20px;
  position: relative;
  overflow: hidden;
}
body::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: 
    radial-gradient(circle at 20% 30%, rgba(242,182,50,0.03), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(16,185,129,0.03), transparent 40%);
  animation: ambientMove 20s ease-in-out infinite;
  pointer-events: none;
}
@keyframes ambientMove {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(-20px, -20px); }
}
#game {
  max-width: 1000px;
  width: 100%;
  position: relative;
  z-index: 1;
}
#table {
  position: relative;
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
  border-radius: 300px / 180px;
  background: 
    radial-gradient(ellipse at center, #0d4428 0%, #0a3820 50%, #062e1a 100%);
  border: 18px solid #5a3d2b;
  box-shadow: 
    inset 0 0 100px rgba(0,0,0,0.6),
    0 20px 60px rgba(0,0,0,0.7),
    inset 0 2px 0 rgba(255,255,255,0.1),
    0 0 100px rgba(0,0,0,0.3);
  padding: 40px 20px;
}
#table::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 200px;
  height: 200px;
  background: radial-gradient(circle, rgba(242,182,50,0.05), transparent 70%);
  border-radius: 50%;
  pointer-events: none;
}
.player-area {
  text-align: center;
  margin: 20px 0;
}
.player-label {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
  color: #ffd369;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}
.hand {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 15px 0;
  min-height: 110px;
}
.card {
  width: 75px;
  height: 105px;
  border-radius: 8px;
  background: linear-gradient(145deg, #ffffff, #f5f5f5);
  color: #000;
  font-size: 1.8rem;
  font-weight: bold;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  box-shadow: 
    0 4px 12px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.5);
  transition: transform 0.3s, box-shadow 0.3s;
  position: relative;
  border: 2px solid rgba(0,0,0,0.1);
}
.card:hover { 
  transform: translateY(-8px) scale(1.05); 
  box-shadow: 
    0 8px 20px rgba(0,0,0,0.6),
    0 0 30px rgba(242,182,50,0.3),
    inset 0 1px 0 rgba(255,255,255,0.5);
}
.card.red { color: #dc2626; }
.card-back {
  background: 
    repeating-linear-gradient(45deg, #b91c1c 0px, #b91c1c 10px, #991b1b 10px, #991b1b 20px),
    linear-gradient(to bottom, #dc2626, #b91c1c);
  border: 3px solid #7f1d1d;
}
.card-back::before {
  content: '♠';
  font-size: 3rem;
  color: rgba(255,255,255,0.15);
  position: absolute;
}
#board-area {
  margin: 30px 0;
  text-align: center;
}
#pot-display {
  font-size: 2rem;
  font-weight: bold;
  color: #ffd369;
  text-shadow: 
    0 0 20px rgba(255,211,105,0.8),
    0 0 40px rgba(255,211,105,0.4),
    0 2px 4px rgba(0,0,0,0.8);
  margin-bottom: 20px;
  transition: all 0.3s;
  position: relative;
}
#pot-display::before {
  content: '💰';
  position: absolute;
  left: -40px;
  font-size: 1.5rem;
  animation: float 2s ease-in-out infinite;
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}
#pot-display.glow {
  text-shadow: 
    0 0 30px #ffd369, 
    0 0 50px #ffd369,
    0 0 70px #ffd369,
    0 2px 4px rgba(0,0,0,0.8);
  transform: scale(1.2);
}
#board {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  min-height: 110px;
}
#controls {
  background: rgba(0,0,0,0.3);
  border-radius: 15px;
  padding: 20px;
  margin-top: 30px;
}
#bet-area {
  text-align: center;
  margin-bottom: 15px;
}
.chips {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 15px 0;
  flex-wrap: wrap;
}
.chip {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: 4px solid;
  font-weight: bold;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 
    0 4px 10px rgba(0,0,0,0.4),
    inset 0 2px 4px rgba(255,255,255,0.3);
  position: relative;
}
.chip::before {
  content: '';
  position: absolute;
  width: 50%;
  height: 50%;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4), transparent);
  top: 15%;
  left: 15%;
  pointer-events: none;
}
.chip:hover { 
  transform: scale(1.15) translateY(-3px); 
  box-shadow: 
    0 6px 15px rgba(0,0,0,0.5),
    0 0 20px currentColor,
    inset 0 2px 4px rgba(255,255,255,0.3);
}
.chip:active { 
  transform: scale(1.25) translateY(-5px); 
  box-shadow: 
    0 8px 25px rgba(0,0,0,0.6),
    0 0 30px currentColor,
    inset 0 2px 4px rgba(255,255,255,0.3);
}
.chip:disabled { opacity: 0.4; cursor: not-allowed; transform: none !important; }
.chip-100 { background: radial-gradient(circle at 30% 30%, #fff, #e0e0e0); border-color: #999; color: #000; }
.chip-200 { background: radial-gradient(circle at 30% 30%, #ef4444, #dc2626); border-color: #991b1b; color: #fff; }
.chip-300 { background: radial-gradient(circle at 30% 30%, #3b82f6, #2563eb); border-color: #1e40af; color: #fff; }
.chip-500 { background: radial-gradient(circle at 30% 30%, #10b981, #059669); border-color: #065f46; color: #fff; }
.chip-1000 { background: radial-gradient(circle at 30% 30%, #000, #333); border-color: #fbbf24; color: #fbbf24; }
#current-bet {
  font-size: 1.3rem;
  font-weight: bold;
  color: #ffd369;
  margin: 10px 0;
  min-height: 30px;
  text-shadow: 0 0 10px rgba(255,211,105,0.6);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}
.actions {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 15px;
  flex-wrap: wrap;
}
button.action-btn {
  padding: 12px 28px;
  border-radius: 8px;
  border: none;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 
    0 4px 10px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.2);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}
button.action-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255,255,255,0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}
button.action-btn:hover::before {
  width: 300px;
  height: 300px;
}
button.action-btn:hover { 
  transform: translateY(-3px); 
  box-shadow: 
    0 6px 20px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.2);
}
button.action-btn:active { transform: translateY(-1px); }
button.action-btn:disabled { 
  opacity: 0.5; 
  cursor: not-allowed; 
  transform: none; 
}
button.action-btn span { position: relative; z-index: 1; }
.btn-bet { background: linear-gradient(135deg, #10b981, #059669); color: white; }
.btn-fold { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; }
.btn-next { background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; }
.btn-clear { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }
#status {
  margin-top: 15px;
  font-size: 1.05rem;
  font-weight: 500;
  text-align: center;
  color: #ffd369;
  min-height: 50px;
  line-height: 1.4;
}
.money-display {
  text-align: center;
  font-size: 1.2rem;
  font-weight: 600;
  margin-top: 10px;
}
@keyframes slideIn {
  from { opacity: 0; transform: translateY(-20px) rotateY(90deg); }
  to { opacity: 1; transform: translateY(0) rotateY(0); }
}
.card { animation: slideIn 0.4s ease; }

@keyframes dealCard {
  0% { transform: translateX(-100vw) rotate(-180deg); opacity: 0; }
  70% { transform: translateX(10px) rotate(5deg); }
  100% { transform: translateX(0) rotate(0); opacity: 1; }
}

@keyframes chipBounce {
  0%, 100% { transform: scale(1); }
  25% { transform: scale(1.2) rotate(5deg); }
  75% { transform: scale(1.15) rotate(-5deg); }
}

.player-label {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 10px;
  color: #ffd369;
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
</style>
</head>
<body>
<div id="game">
  <div id="table">
    <div class="player-area">
      <div class="player-label">🤖 Dealer</div>
      <div id="dealer-hand" class="hand"></div>
    </div>

    <div id="board-area">
      <div id="pot-display">Pot: $0</div>
      <div id="board"></div>
    </div>

    <div class="player-area">
      <div class="player-label">👤 You</div>
      <div id="player-hand" class="hand"></div>
      <div class="money-display" id="player-money">Balance: $1000</div>
    </div>

    <div id="controls">
      <div id="bet-area">
        <div class="chips">
          <button class="chip chip-100" data-value="100">$100</button>
          <button class="chip chip-200" data-value="200">$200</button>
          <button class="chip chip-300" data-value="300">$300</button>
          <button class="chip chip-500" data-value="500">$500</button>
          <button class="chip chip-1000" data-value="1000">$1K</button>
        </div>
        <div id="current-bet">Current Bet: $0</div>
      </div>
      
      <div class="actions">
        <button class="action-btn btn-clear" id="clear-btn"><span>Clear Bet</span></button>
        <button class="action-btn btn-bet" id="bet-btn"><span>Place Bet</span></button>
        <button class="action-btn btn-fold" id="fold-btn"><span>Fold</span></button>
        <button class="action-btn btn-next" id="next-btn"><span>New Round</span></button>
      </div>
      
      <div id="status">Place your bet to start!</div>
    </div>
  </div>
</div>

<script>
const SUITS = ['♠','♥','♦','♣'];
const VALUES = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
const VALUE_MAP = {
  '2':2,'3':3,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9,'10':10,'J':11,'Q':12,'K':13,'A':14
};

let deck = [];
let player = { hand: [], money: 1000 };
let dealer = { hand: [], money: 1000 };
let board = [];
let pot = 0;
let currentBet = 0;
let gameState = 'betting'; // betting, dealer-turn, showdown, round-over

function createDeck() {
  deck = [];
  for (let suit of SUITS) {
    for (let value of VALUES) {
      deck.push({ value, suit });
    }
  }
  // Shuffle
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }
}

function dealCard(hand, count = 1) {
  for (let i = 0; i < count; i++) {
    if (deck.length > 0) {
      hand.push(deck.pop());
    }
  }
}

function renderCard(card, hidden = false) {
  if (hidden) {
    return `<div class="card card-back"></div>`;
  }
  const isRed = card.suit === '♥' || card.suit === '♦';
  return `<div class="card ${isRed ? 'red' : ''}">${card.value}<br>${card.suit}</div>`;
}

function render() {
  // Dealer hand (hidden unless showdown)
  const dealerHTML = dealer.hand.map(card => 
    renderCard(card, gameState !== 'showdown' && gameState !== 'round-over')
  ).join('');
  document.getElementById('dealer-hand').innerHTML = dealerHTML;

  // Player hand
  const playerHTML = player.hand.map(card => renderCard(card)).join('');
  document.getElementById('player-hand').innerHTML = playerHTML;

  // Board
  const boardHTML = board.map(card => renderCard(card)).join('');
  document.getElementById('board').innerHTML = boardHTML;

  // Money and pot
  document.getElementById('player-money').textContent = `Balance: $${player.money}`;
  document.getElementById('pot-display').textContent = `Pot: $${pot}`;
  document.getElementById('current-bet').textContent = `Current Bet: $${currentBet}`;

  // Update chip availability
  document.querySelectorAll('.chip').forEach(btn => {
    const value = parseInt(btn.dataset.value);
    btn.disabled = value > player.money || gameState !== 'betting';
  });

  // Update button states
  document.getElementById('bet-btn').disabled = gameState !== 'betting' || currentBet <= 0;
  document.getElementById('fold-btn').disabled = gameState === 'round-over';
  document.getElementById('clear-btn').disabled = gameState !== 'betting' || currentBet <= 0;
}

function evaluateHand(cards) {
  if (cards.length === 0) return { score: 0, handName: 'Nothing' };
  
  const values = cards.map(c => VALUE_MAP[c.value]).sort((a, b) => b - a);
  const suits = cards.map(c => c.suit);
  
  // Count pairs
  const valueCounts = {};
  values.forEach(v => valueCounts[v] = (valueCounts[v] || 0) + 1);
  const counts = Object.values(valueCounts).sort((a, b) => b - a);
  
  // Check for flush
  const suitCounts = {};
  suits.forEach(s => suitCounts[s] = (suitCounts[s] || 0) + 1);
  const isFlush = Math.max(...Object.values(suitCounts)) >= 5;
  
  // Check for straight
  const uniqueValues = [...new Set(values)].sort((a, b) => b - a);
  let isStraight = false;
  for (let i = 0; i <= uniqueValues.length - 5; i++) {
    if (uniqueValues[i] - uniqueValues[i + 4] === 4) {
      isStraight = true;
      break;
    }
  }
  // Check for A-2-3-4-5 straight (wheel)
  if (uniqueValues.includes(14) && uniqueValues.includes(2) && uniqueValues.includes(3) && 
      uniqueValues.includes(4) && uniqueValues.includes(5)) {
    isStraight = true;
  }
  
  let score = Math.max(...values);
  let handName = 'High Card';
  
  if (isStraight && isFlush) { 
    score += 900; 
    handName = 'Straight Flush'; 
  } else if (counts[0] === 4) { 
    score += 800; 
    handName = 'Four of a Kind'; 
  } else if (counts[0] === 3 && counts[1] >= 2) { 
    score += 700; 
    handName = 'Full House'; 
  } else if (isFlush) { 
    score += 600; 
    handName = 'Flush'; 
  } else if (isStraight) { 
    score += 500; 
    handName = 'Straight'; 
  } else if (counts[0] === 3) { 
    score += 400; 
    handName = 'Three of a Kind'; 
  } else if (counts[0] === 2 && counts[1] === 2) { 
    score += 300; 
    handName = 'Two Pair'; 
  } else if (counts[0] === 2) { 
    score += 200; 
    handName = 'One Pair'; 
  }
  
  return { score, handName };
}

function dealerAI() {
  const dealerCards = [...dealer.hand, ...board];
  const result = evaluateHand(dealerCards);
  const score = result.score;
  
  // Dealer decision logic based on hand strength
  if (score > 600) return 'call'; // Flush or better
  if (score > 400) return Math.random() > 0.2 ? 'call' : 'fold'; // Three of a kind+
  if (score > 300) return Math.random() > 0.4 ? 'call' : 'fold'; // Two pair+
  if (score > 200) return Math.random() > 0.6 ? 'call' : 'fold'; // One pair
  return Math.random() > 0.8 ? 'call' : 'fold'; // High card - usually fold
}

function checkWinner() {
  const playerResult = evaluateHand([...player.hand, ...board]);
  const dealerResult = evaluateHand([...dealer.hand, ...board]);
  
  let message = '';
  if (playerResult.score > dealerResult.score) {
    player.money += pot;
    message = `🏆 You win ${pot}! Your ${playerResult.handName} beats Dealer's ${dealerResult.handName}`;
  } else if (dealerResult.score > playerResult.score) {
    message = `😔 Dealer wins ${pot} with ${dealerResult.handName} vs your ${playerResult.handName}`;
  } else {
    player.money += Math.floor(pot / 2);
    message = `🤝 It's a tie! Both have ${playerResult.handName}. You get ${Math.floor(pot / 2)} back.`;
  }
  
  pot = 0;
  currentBet = 0;
  gameState = 'round-over';
  setStatus(message);
  render();
}

function setStatus(message) {
  document.getElementById('status').textContent = message;
}

function animatePot() {
  const potEl = document.getElementById('pot-display');
  potEl.classList.add('glow');
  setTimeout(() => potEl.classList.remove('glow'), 500);
}

function newRound() {
  if (player.money <= 0) {
    player.money = 1000;
    setStatus('Bankrupt! Reloaded with $1000. Good luck!');
  }
  
  board = [];
  player.hand = [];
  dealer.hand = [];
  pot = 0;
  currentBet = 0;
  gameState = 'betting';
  
  createDeck();
  dealCard(player.hand, 2);
  dealCard(dealer.hand, 2);
  dealCard(board, 3); // Flop
  
  setStatus('New round! Place your bet.');
  render();
}

// Event Listeners
document.querySelectorAll('.chip').forEach(btn => {
  btn.addEventListener('click', () => {
    if (gameState !== 'betting') return;
    
    const value = parseInt(btn.dataset.value);
    if (value <= player.money) {
      currentBet += value;
      animatePot();
      btn.style.animation = 'chipBounce 0.4s ease';
      setTimeout(() => btn.style.animation = '', 400);
      render();
    }
  });
});

document.getElementById('clear-btn').addEventListener('click', () => {
  if (gameState === 'betting') {
    currentBet = 0;
    setStatus('Bet cleared!');
    render();
  }
});

document.getElementById('bet-btn').addEventListener('click', () => {
  if (gameState !== 'betting' || currentBet <= 0) return;
  
  player.money -= currentBet;
  pot += currentBet;
  gameState = 'dealer-turn';
  setStatus(`You bet $${currentBet}. Dealer is thinking...`);
  animatePot();
  render();
  
  setTimeout(() => {
    const dealerAction = dealerAI();
    
    if (dealerAction === 'fold') {
      player.money += pot;
      setStatus(`🎉 Dealer folded! You win $${pot}!`);
      pot = 0;
      currentBet = 0;
      gameState = 'round-over';
      render();
    } else {
      const dealerBet = currentBet;
      pot += dealerBet;
      setStatus(`Dealer calls your bet! Revealing cards...`);
      animatePot();
      render();
      
      setTimeout(() => {
        // Turn & River
        dealCard(board, 1); // Turn
        render();
        
        setTimeout(() => {
          dealCard(board, 1); // River
          gameState = 'showdown';
          render();
          
          setTimeout(() => {
            checkWinner();
          }, 800);
        }, 800);
      }, 1000);
    }
  }, 1500);
});

document.getElementById('fold-btn').addEventListener('click', () => {
  if (gameState === 'round-over') return;
  
  setStatus('You folded. Dealer wins this round.');
  pot = 0;
  currentBet = 0;
  gameState = 'round-over';
  render();
});

document.getElementById('next-btn').addEventListener('click', () => {
  newRound();
});

// Start game
newRound();
</script>
</body>
</html>
